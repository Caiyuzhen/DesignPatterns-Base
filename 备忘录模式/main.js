/*
	ã€ğŸ’¡å¤‡å¿˜å½•æ¨¡å¼ã€‘ 
		1.æœ¬è´¨å°±æ˜¯å†å²çºªå½•, æŠŠéœ€è¦ä¿å­˜çš„æ•°æ®å­˜åˆ°ä¸€ä¸ªå †æ ˆä¸­ï¼›
		2.å¯ä»¥ä¸€æ­¥æ­¥æ’¤å›ä¿å­˜è¿‡çš„æ•°æ®ï¼›

		å¤‡å¿˜å½•æ¨¡å¼ç”±ä¸‰ä¸ªä¸»è¦ç»„ä»¶ç»„æˆï¼š
			å‘èµ·äººï¼ˆOriginatorï¼‰ï¼šè´Ÿè´£åˆ›å»ºå¤‡å¿˜å½•ï¼Œå¹¶ä»å¤‡å¿˜å½•ä¸­æ¢å¤å…¶å†…éƒ¨çŠ¶æ€ã€‚
			å¤‡å¿˜å½•ï¼ˆMementoï¼‰ï¼šç”¨äºå­˜å‚¨å‘èµ·äººçš„å†…éƒ¨çŠ¶æ€ã€‚å¤‡å¿˜å½•å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ï¼Œæ¯ä¸ªå®ä¾‹çš„å†…éƒ¨çŠ¶æ€å¯èƒ½ä¸åŒã€‚
			ç®¡ç†è€…ï¼ˆCaretakerï¼‰ï¼šè´Ÿè´£å­˜å‚¨å¤‡å¿˜å½•ï¼Œå¹¶æä¾›ä¸€ä¸ªç”¨äºæ¢å¤å¤‡å¿˜å½•çš„æ¥å£ã€‚ç®¡ç†è€…ä¸éœ€è¦äº†è§£å¤‡å¿˜å½•çš„å…·ä½“å®ç°ç»†èŠ‚ã€‚	
*/


// ğŸŒ°ä¾‹å­ä¸€(ä¿å­˜æ°´æœåˆ°å†°ç®±ä¸­): â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”


// ğŸ”¥å‘èµ·è€…, è´Ÿè´£ä¿å­˜æ°´æœï¼ˆçŠ¶æ€ï¼‰
class Caretaker {
	constructor() {
		this.fruitName = ''
	}

	getFruitName() {
		return this.fruitName
	}

	setFruitName(fruitName) {
		this.fruitName = fruitName
	}

	createFruit() { //ğŸ”¥åˆ›å»ºå¤‡å¿˜å½•æ–¹æ³•
		return new Fruit(this.fruitName) //ğŸ”¥ã€ç¬¬ä¸€æ­¥ã€‘ä¼ å…¥æ°´æœå, åˆ›å»ºæ°´æœ, è¿”å›ç»™åˆ°ã€ç®¡ç†è€…ã€‘çš„ push æ–¹æ³•ä¸­
	}

	restoreFruit() { //ğŸ”¥æ¢å¤å¤‡å¿˜å½•æ–¹æ³•
		this.setFruitName((new Fruit).getName())
	}
}

// ã€å¤‡å¿˜å½•æœ¬èº«ã€‘,å› ä¸ºå®ƒä¿å­˜äº†éœ€è¦å¤‡å¿˜çš„çŠ¶æ€ï¼ˆæ°´æœåç§°ï¼‰ï¼Œå¹¶ä¸”å®ƒæä¾›äº† getName å’Œ setName æ–¹æ³•æ¥è·å–å’Œè®¾ç½®çŠ¶æ€, å°†è¢«ä¿å­˜åˆ° Manager ç±»çš„æ•°ç»„ä¸­
class Fruit {
	constructor(name) {
		this.name = name
	}

	getName() {
		return this.name
	}

	setName(name) {
		this.name = name
	}
}


//ã€ç®¡ç†è€…ã€‘, å®ƒæœ‰ä¸€ä¸ªæ•°ç»„æ¥ä¿å­˜å¤‡å¿˜å½•å¯¹è±¡ï¼ˆå³æ°´æœå¯¹è±¡)
class Manager {
	constructor() {
		this.container = []
		this.top = 0 //æ­å»ºä¸€ä¸ªå †æ ˆ, ç”¨äºä¿å­˜ã€å¤‡å¿˜å½•ã€‘ï¼ï¼
	}

	// æŠŠæ°´æœæ”¾å…¥å†°ç®± ğŸ”¥ã€ç¬¬äºŒæ­¥ã€‘
	push(f) {
		this.container[this.top] = f //æŠŠæ°´æœæ”¾å…¥å†°ç®±çš„é¡¶éƒ¨, æ¯”å¦‚ fruit[0] = 'è¥¿ç“œ'
		if(this.top >= 3) {
			console.log("å†°ç®±å·²æ»¡ï¼, å‚¨å­˜ä¸ä¸‹" + f.getName())
			return false
		}else{
			console.log("å·²å­˜å…¥" + f.getName())
			this.top ++
			return true
		}
	}

	// æŠŠæ°´æœä»å†°ç®±å–å‡º
	pop() {
		this.top --
		let f = this.container[this.top] //ä»å†°ç®±çš„é¡¶éƒ¨å–å‡ºæ°´æœ
		if(this.top <= 0) {
			console.log("å·²è¾¾åˆ°æœ€å¤§æ’¤å›æ•°é‡" + f.getName())
		}else{
			console.log("æ’¤å›äº†" + f.getName())
		}
	}
}



class Customer {
	static main() {
		let p = new Caretaker()
		let m = new Manager()

		p.setFruitName("è‹¹æœ") //ğŸ”¥ã€ç¬¬ä¸‰æ­¥ã€‘
		m.push(p.createFruit()) //ä¿å­˜ã€è‹¹æœã€‘åˆ°å¤‡å¿˜å½•ï¼ˆå†°ç®±ï¼‰

		p.setFruitName("é¦™è•‰")
		m.push(p.createFruit()) //ä¿å­˜ã€é¦™è•‰ã€‘åˆ°å¤‡å¿˜å½•ï¼ˆå†°ç®±ï¼‰

		p.setFruitName("æ©˜å­")
		m.push(p.createFruit()) //ä¿å­˜ã€æ©˜å­ã€‘åˆ°å¤‡å¿˜å½•ï¼ˆå†°ç®±ï¼‰

		p.setFruitName("è¥¿ç“œ")
		m.push(p.createFruit()) //å†°ç®±å·²æ»¡ï¼, å‚¨å­˜ä¸ä¸‹è¥¿ç“œ

		p.restoreFruit(m.pop()) //æ¢å¤çŠ¶æ€, æ’¤å›äº†ã€æ©˜å­ã€‘
	}
}


Customer.main()