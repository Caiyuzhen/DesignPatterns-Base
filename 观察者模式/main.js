/*
	ã€è§‚å¯Ÿè€…æ¨¡å¼ã€‘
		1.åŒ…å«ã€è¢«è§‚å¯Ÿç›®æ ‡ã€‘å’Œã€è§‚å¯Ÿè€…æœ¬èº«ã€‘ä¸¤ä¸ªéƒ¨åˆ†, ä¸¤è€…ä¹‹é—´ç›¸äº’ä¾èµ–
		2.ä¸€ä¸ªã€è¢«è§‚å¯Ÿç›®æ ‡ã€‘å¯ä»¥æœ‰å¤šä¸ªã€è§‚å¯Ÿè€…ã€‘, å½“ç›®æ ‡ã€è¢«è§‚å¯Ÿè€…å¯¹è±¡ã€‘çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶, ä¼šé€šçŸ¥æ‰€æœ‰ã€è§‚å¯Ÿè€…ã€‘
		3.å¥½å¤„æ˜¯ä¸ç”¨åœ¨ä¸€ä¸ªå¯¹è±¡å†…å†å»è°ƒç”¨å¦å¤–ä¸€ä¸ªå¯¹è±¡, å‡å°‘äº†è€¦åˆåº¦
		4.æ¯”å¦‚ç”¨åœ¨åå°ç³»ç»Ÿçš„é€šä¿¡

		// ä¼˜ç‚¹æ˜¯å®ç°äº†åŠŸèƒ½çš„æ¥è€¦åˆ
		// ç¼ºç‚¹åˆ™æ˜¯æ— æ³•è¿›è¡Œæ›´ç»†è‡´çš„äº‹ä»¶ç»†åˆ†ç®¡æ§ï¼ˆæ¯”å¦‚ç­›é€‰é€šçŸ¥çš„è§‚å¯Ÿè€…, è¿™æ–¹é¢åªèƒ½é€šè¿‡ã€ğŸ“®è®¢é˜…æ¨¡å¼ã€‘æ¥è§£å†³ï¼‰
*/


// ğŸŒ°ä¾‹å­ä¸€: â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
//ğŸ”µã€è¢«è§‚å¯Ÿç›®æ ‡æ–¹æ³•ã€‘
class Subject {
	constructor() {
		this.observers = [] //ğŸ‘€æ”¶é›†æ‰€æœ‰è§‚å¯Ÿè€…æ•°ç»„
	}

	// æ”¶é›†è§‚å¯Ÿè€…çš„æ–¹æ³•
	add(observer) {
		this.observers.push(observer)
	}

	// é€šçŸ¥æ‰€æœ‰ğŸ‘€è§‚å¯Ÿè€… ï¼ˆè°ƒç”¨è§‚å¯Ÿè€…èº«ä¸Šçš„ update æ–¹æ³•ï¼‰
	notify() {
		this.observers.forEach(item => {
			item.update()
		})
	}

	// ç§»é™¤è§‚å¯Ÿè€…çš„æ–¹æ³•
	remove(observer) {
		this.observers = this.observers.filter(item => item !== observer) //item å°±æ˜¯æ¯ä¸€ä¸ªè§‚å¯Ÿè€…
	}
}


//ğŸ‘€ã€è§‚å¯Ÿè€…æ–¹æ³•ã€‘
class Observer { 
	constructor(name) {
		this.name = name
	}

	update() {
		console.log('è§‚å¯Ÿè€…çŠ¶æ€å‘ç”Ÿæ”¹å˜', this.name)
	}
}


const subject = new Subject()
const observer1 = new Observer('Kim')
const observer2 = new Observer('Tom')

subject.add(observer1) //æŠŠ ğŸ‘€ è§‚å¯Ÿè€…åŠ å…¥ã€è¢«è§‚å¯Ÿè€…çš„æ•°ç»„ã€‘ä¸­
subject.add(observer2) //æŠŠ ğŸ‘€ è§‚å¯Ÿè€…åŠ å…¥ã€è¢«è§‚å¯Ÿè€…çš„æ•°ç»„ã€‘ä¸­

//2s å
setTimeout(() => {
	subject.remove(observer1) //âŒ ç§»é™¤æ‰ä¸€ä½è§‚å¯Ÿè€…
}, 1000)

//5s å
setTimeout(() => {
	subject.notify() //è§¦å‘é€šçŸ¥æ‰€æœ‰ğŸ‘€è§‚å¯Ÿè€…çš„æ–¹æ³•
}, 2000)







// ğŸŒ°ä¾‹å­äºŒ(è·¨ç»„ä»¶çš„é€šè®¯  - æ¯”å¦‚ header è·Ÿ content ä¸­çš„é¢åŒ…å±‘ä¸€èµ·è§‚å¯ŸåŒä¸€ä¸ª tab): â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
//ğŸ”µã€è¢«è§‚å¯Ÿç›®æ ‡æ–¹æ³•ã€‘- è§¦å‘æ›´æ–° DOM, æ¯”å¦‚è‡ªå·±è¢«ç‚¹å‡»å, å»é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
class SubjectFn { 
	constructor() {
		this.observers = [] //ğŸ‘€æ”¶é›†æ‰€æœ‰è§‚å¯Ÿè€…æ•°ç»„
	}
	// æ”¶é›†è§‚å¯Ÿè€…çš„æ–¹æ³•
	add(observer) {
		this.observers.push(observer)
	}
	// é€šçŸ¥æ‰€æœ‰ğŸ‘€è§‚å¯Ÿè€… ï¼ˆè°ƒç”¨è§‚å¯Ÿè€…èº«ä¸Šçš„ update æ–¹æ³•ï¼‰
	notify(data) {
		this.observers.forEach(item => {
			item.update(data) //ğŸ”¥ğŸ”¥ğŸ”¥æŠŠæ•°æ®ä¼ å›ç»™ã€ğŸ‘€è§‚å¯Ÿè€…ã€‘çš„ update æ–¹æ³•
		})
	}
	// ç§»é™¤è§‚å¯Ÿè€…çš„æ–¹æ³•
	remove(observer) {
		this.observers = this.observers.filter(item => item !== observer) //item å°±æ˜¯æ¯ä¸€ä¸ªè§‚å¯Ÿè€…
	}
}


//ğŸ‘€ã€è§‚å¯Ÿè€…æ–¹æ³•ã€‘- æœ€ç»ˆæ“ä½œ DOm , è‡ªå·±éœ€è¦è¢«æ›´æ–°
class ObserverFn { 
	constructor(className) {
		this.ele = document.querySelector(className) //ğŸ”¥ğŸ”¥ğŸ”¥æ‰¾åˆ°ä¼ å…¥çš„ DOM èŠ‚ç‚¹, name å°±æ˜¯ä¼ å…¥çš„ DOM èŠ‚ç‚¹çš„ class 
	}
	update(data) {
		console.log('è§‚å¯Ÿè€…çŠ¶æ€å‘ç”Ÿæ”¹å˜!', this.ele)
		this.ele.innerHTML = data //ğŸ”¥ğŸ”¥ğŸ”¥æ¥æ”¶åˆ° è¢«è§‚å¯Ÿè€… å‘æ¥çš„æ•°æ®å, æ›´æ–° DOM
	}
}


//å®ä¾‹åŒ–ä¸€ä¸ªã€è¢«è§‚å¯Ÿè€…ã€‘æ–¹æ³•
const subjectFn = new SubjectFn() 

// æ·»åŠ ç¬¬ä¸€ä¸ªè§‚å¯Ÿè€…
// const breadObs = document.querySelector('.bread') //æ‰¾åˆ°é¢åŒ…å±‘ DOM (æœªå°è£…è¿›æ„é€ å‡½æ•°çš„å†™æ³•)
const observerFn_1 = new ObserverFn('.bread') //å®ä¾‹åŒ–å¹¶ä¼ å…¥é¢åŒ…å±‘ DOM, ä½œä¸ºã€ğŸ‘€è§‚å¯Ÿè€…ã€‘
subjectFn.add(observerFn_1)//ğŸŒŸæŠŠæ‰€æœ‰ ã€ğŸ‘€è§‚å¯Ÿè€…ã€‘ éƒ½åŠ å…¥åˆ°ã€è¢«è§‚å¯Ÿè€…çš„æ•°ç»„ã€‘ä¸­

// æ·»åŠ ç¬¬äºŒä¸ªè§‚å¯Ÿè€… (åŒæ ·ä¹Ÿæ˜¯è§‚å¯Ÿ ã€é¦–é¡µã€‘ tab çš„ç‚¹å‡»äº‹ä»¶)
// const header = document.querySelector('.header') //æ‰¾åˆ° header DOM (æœªå°è£…è¿›æ„é€ å‡½æ•°çš„å†™æ³•)
const observerFn_2 = new ObserverFn('.header') //å®ä¾‹åŒ–å¹¶ä¼ å…¥ header DOM, ä½œä¸ºã€ğŸ‘€è§‚å¯Ÿè€…ã€‘
subjectFn.add(observerFn_2)


//ğŸ”¥ğŸ”¥æ‰¾åˆ°æ‰€æœ‰ li ã€ğŸ”µè¢«è§‚å¯Ÿå¯¹è±¡ã€‘, ç»Ÿä¸€æ·»åŠ äº‹ä»¶å¹¶è§¦å‘é€šçŸ¥
let oLi = document.querySelectorAll('.left li') 
for(let i = 0; i < oLi.length; i++) {
	oLi[i].addEventListener('click', function(){ //ç»™æ¯ä¸€ä¸ª li æ·»åŠ ç‚¹å‡»äº‹ä»¶
		console.log(i, oLi[i]) //0 , 1 , 2 , 3
		console.log(this.innerHTML) // æ‹¿åˆ° tab çš„æ–‡æœ¬å†…å®¹, this å°±æ˜¯å½“å‰ç‚¹å‡»çš„ li
		subjectFn.notify(this.innerHTML) //ğŸ”¥ğŸ”¥ğŸ”¥æŠŠ tab çš„æ–‡æœ¬å†…å®¹ä¼ å…¥åˆ°ã€ğŸ”µè¢«è§‚å¯Ÿè€…çš„æ–¹æ³•ã€‘ä¸­, å»æ›´æ–° DOM
	}
)}